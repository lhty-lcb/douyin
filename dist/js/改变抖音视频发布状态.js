"use strict";var typeId=prompt("想把视频变成什么状态：公开：0；自己可见:1；仅好友可见:2","请输入数字……");if(typeId){var inputDate=prompt("要改变状态的视频的发布时间，格式：xxxx-xx-xx/xxxx-xx-xx（如果写0/xxxx-xx-xx则表示将这个时间点以前的视频状态全部改变，xxxx-xx-xx/0同理，0/0表示所有视频，一定要按照格式写！一定要按照格式写！一定要按照格式写！）","0/0");if(inputDate)var scrollTop=0,int=setInterval(function(){var e=setTimeout(function(){clearInterval(int),inputDate=inputDate.split("/");var e=parseInt(inputDate[0].replace(/-/g,"")),t=parseInt(inputDate[1].replace(/-/g,""));0==t&&(t=99999999);var a=function(e,t){for(var n=e.split("; "),r=0;r<n.length;r++){var a=n[r].split("=");if(a[0]==t)return a[1]}return!1}(document.cookie,"csrf_token");if(0==(typeId=parseInt(typeId))||1==typeId||2==typeId){var n=document.getElementsByClassName("content-body--29zhI")[0],r=[];for(var o in n)r.push(o);for(var i=n[r[0]].alternate.memoizedProps.children,p=[],s=0;s<i.length;s++){var c={};c.id=i[s].key;var l=i[s].props.data.create_time,u=new Date(l*=1e3).toLocaleDateString();c.timeNum=parseInt(u.replace(/\//g,"")),c.time=u,p.push(c)}var m=0;for(s=0;s<p.length;s++)p[s].timeNum<=t&&p[s].timeNum>=e&&m++;var x=0,d=[0,0],f=setInterval(function(){x==m&&(clearInterval(f),confirm("总共要改动："+m+"个，成功了："+d[0]+"个，失败了："+d[1]+"个，是否刷新？（刷新后才能看到改动）")&&location.reload())},16);for(s=0;s<p.length;s++)if(p[s].timeNum<=t&&p[s].timeNum>=e){v("https://creator.douyin.com/web/api/media/aweme/update","item_id="+p[s].id+"&visibility_type="+typeId,function(e){e&&0==(e=JSON.parse(e)).status_code?d[0]++:d[1]++,x++})}}function v(e,t,n){var r=new XMLHttpRequest;r.open("post",e),r.setRequestHeader("Content-Type","Application/x-www-form-urlencoded"),r.setRequestHeader("x-csrf-token",a),r.send(t),r.onreadystatechange=function(){4==r.readyState&&200==r.status&&n(r.responseText)}}},3e3);scrollTop=document.documentElement.scrollTop,document.documentElement.scrollTop+=50,scrollTop!=document.documentElement.scrollTop&&clearTimeout(e)},16)}