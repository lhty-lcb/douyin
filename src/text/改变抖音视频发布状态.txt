"use strict";var typeId=prompt("想把视频变成什么状态：公开：0；自己可见:1；仅好友可见:2","请输入数字……");if(typeId){var inputDate=prompt("要改变状态的视频的发布时间，格式：xxxx-xx-xx/xxxx-xx-xx（如果写0/xxxx-xx-xx则表示将这个时间点以前的视频状态全部改变，xxxx-xx-xx/0同理，0/0表示所有视频，一定要按照格式写！一定要按照格式写！一定要按照格式写！）","0/0");if(inputDate)var scrollTop=0,int=setInterval(function(){var e=setTimeout(function(){clearInterval(int),inputDate=inputDate.split("/");var e=parseInt(inputDate[0].replace(/-/g,"")),t=parseInt(inputDate[1].replace(/-/g,""));0==t&&(t=99999999);var a=function(e,t){for(var n=e.split("; "),r=0;r<n.length;r++){var a=n[r].split("=");if(a[0]==t)return a[1]}return!1}(document.cookie,"csrf_token");if(0==(typeId=parseInt(typeId))||1==typeId||2==typeId){var n=document.getElementsByClassName("content-body--29zhI")[0],r=[];for(var o in n)r.push(o);for(var i=r[0],p=n[i].alternate.memoizedProps.children,s=[],l=0;l<p.length;l++){(x={}).id=p[l].key;var c=p[l].props.data.create_time;c*=1e3;var u=(f=new Date(c).toLocaleDateString()).split("/");x.time=parseInt(""+u[0]+T(u[1])+T(u[2])),x.dateTime=f,s.push(x)}var m=n[i].memoizedProps.children,d=[];for(l=0;l<m.length;l++){var x;(x={}).id=m[l].key;c=m[l].props.data.create_time;c*=1e3;var f;u=(f=new Date(c).toLocaleDateString()).split("/");x.time=parseInt(""+u[0]+T(u[1])+T(u[2])),x.dateTime=f,d.push(x)}d.length>s.length&&(s=d),console.log(s);var v=0;for(l=0;l<s.length;l++)s[l].timeNum<=t&&s[l].timeNum>=e&&v++;var y=0,I=[0,0],g=setInterval(function(){y==v&&(clearInterval(g),confirm("总共要改动："+v+"个，成功了："+I[0]+"个，失败了："+I[1]+"个，是否刷新？（刷新后才能看到改动）")&&location.reload())},16);for(l=0;l<s.length;l++)if(s[l].timeNum<=t&&s[l].timeNum>=e){h("https://creator.douyin.com/web/api/media/aweme/update","item_id="+s[l].id+"&visibility_type="+typeId,function(e){e&&0==(e=JSON.parse(e)).status_code?I[0]++:I[1]++,y++})}}function h(e,t,n){var r=new XMLHttpRequest;r.open("post",e),r.setRequestHeader("Content-Type","Application/x-www-form-urlencoded"),r.setRequestHeader("x-csrf-token",a),r.send(t),r.onreadystatechange=function(){4==r.readyState&&200==r.status&&n(r.responseText)}}function T(e){return"string"==typeof e?e.length<2?"0"+e:e:e<10?"0"+e:e}},1e4);scrollTop=document.documentElement.scrollTop,document.documentElement.scrollTop+=50,scrollTop!=document.documentElement.scrollTop&&clearTimeout(e)},16)}